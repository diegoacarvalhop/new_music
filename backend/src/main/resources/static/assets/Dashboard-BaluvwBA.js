import{r,j as a}from"./react-vendor-CQulTfZ0.js";import{L as H}from"./router-MSaW0Gl8.js";import{u as N,g as u}from"./index-Cs2E90Ho.js";import"./axios-D5GkNzM3.js";function E(){const{t:o}=N(),[t,j]=r.useState({alunos:0,professores:0,turmas:0,alunosComPagamentoAtrasado:0,aulasHoje:0}),[x,l]=r.useState(!1),[d,n]=r.useState([]),[b,c]=r.useState(!1),[i,h]=r.useState("");r.useEffect(()=>{u().get("/relatorios/consolidado/dashboard").then(s=>{const e=s.data||{};j({alunos:e.alunos??0,professores:e.professores??0,turmas:e.turmas??0,alunosComPagamentoAtrasado:e.alunosComPagamentoAtrasado??0,aulasHoje:e.aulasHoje??0})}).catch(()=>{})},[]);const p=[{label:o("dashboard.statsAlunos"),value:t.alunos,path:"/alunos",color:"primary"},{label:o("dashboard.statsProfessores"),value:t.professores,path:"/professores",color:"secondary"},{label:o("dashboard.statsTurmas"),value:t.turmas,path:"/turmas",color:"accent"},{label:o("dashboard.statsAlunosAtraso"),value:t.alunosComPagamentoAtrasado,path:"/financeiro",color:"warning"},{label:o("dashboard.statsAulasHoje"),value:t.aulasHoje,path:"/turmas",color:"secondary",onClick:()=>f()}];function f(){h(""),c(!0),l(!0),u().get("/relatorios/consolidado/aulas-hoje").then(s=>{n(s.data??[])}).catch(()=>{h(o("common.errorLoading")),n([])}).finally(()=>c(!1))}return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card dashboard-welcome-card dashboard-welcome-card--top",children:[a.jsx("h2",{style:{margin:"0 0 0.75rem",fontSize:"1.1rem",color:"var(--secondary)"},children:o("dashboard.welcomePanel")}),a.jsx("p",{style:{margin:0,color:"var(--text-muted)"},children:o("dashboard.useMenu")})]}),a.jsx("div",{className:"page-header",children:a.jsx("h1",{children:o("nav.home")})}),a.jsx("div",{className:"dashboard-cards",children:p.map(({label:s,value:e,path:g,color:v,onClick:m})=>a.jsxs(H,{to:g,className:`dashboard-card dashboard-card--${v}`,onClick:m?A=>{A.preventDefault(),m()}:void 0,children:[a.jsx("span",{className:"dashboard-card-value",children:e}),a.jsx("span",{className:"dashboard-card-label",children:s})]},s))}),x&&a.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:a.jsxs("div",{className:"modal modal-aulas-hoje",onClick:s=>s.stopPropagation(),children:[a.jsx("div",{className:"modal-header",children:a.jsx("h2",{children:o("dashboard.statsAulasHoje")})}),a.jsxs("div",{className:"modal-body",children:[i&&a.jsx("div",{className:"alert alert-error",children:i}),b?a.jsx("p",{children:o("common.loading")}):d.length===0?a.jsx("p",{className:"form-hint",children:"Nenhuma aula cadastrada para hoje."}):a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Instrumento"}),a.jsx("th",{children:"Professor"}),a.jsx("th",{children:"HorÃ¡rio"})]})}),a.jsx("tbody",{children:d.map((s,e)=>a.jsxs("tr",{children:[a.jsx("td",{children:s.instrumento}),a.jsx("td",{children:s.professor}),a.jsx("td",{children:s.horarioInicio?`${s.horarioInicio.substring(0,5)}${s.horarioFim?` - ${s.horarioFim.substring(0,5)}`:""}`:""})]},e))})]})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>l(!1),children:o("common.close")??"Fechar"})})]})})]})}export{E as default};
